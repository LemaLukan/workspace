package proj;

import java.awt.Color;
import java.awt.Graphics;

public class ShapeFactory {
	private Shape a;
	
	public ShapeFactory()
	{
		
	}
	
	public ShapeFactory(String shape) throws Exception
	{
		if (shape.compareTo("RECTANGLE") == 0)
		{
			a = new Rectangle();
		}
		else if (shape.compareTo("CIRCLE") == 0)
		{
			a = new Circle();
		}
		else if (shape.compareTo("SQUARE") == 0)
		{
			a = new Square();
		}
		else
		{
			throw new Exception("unknown type of shape");
		}
	}
	public abstract 
	
	public void changeColor(Color c){
		setColor(c);
	}
	public void changeColorTemporarily(){	 
		originalColorCircle = getColor(); 
		setColor(Color.yellow) ;
		perimeterSelected = true;
	}
	public void changeColorBack(){	 
		setColor(originalColorCircle); 
		perimeterSelected = false;
	}
	public abstract boolean onThePerimeter(Coordinates mousePosition);
	
	void moveShape(Coordinates currentPositionMouse){	     	
		if (isShapeSelected()) {		
			// If a shape is selected for a move operation, change the reference point 
			// as the mouse is being dragged.
			getReferencePoint().setX(getReferencePoint().getX() + 
					currentPositionMouse.getX() -
					getLastMousePosition().getX());
			getReferencePoint().setY(getReferencePoint().getY() +
					currentPositionMouse.getY() -
					getLastMousePosition().getY());
			setLastMousePosition(currentPositionMouse);
		}
	}
	
	public abstract boolean shapeIsSelected(Coordinates positionOfMouse);
	
	protected double distance(Coordinates point1, Coordinates point2){
		double dist; // dist is the distance from point1 to point2
		dist = Math.sqrt((double) ((point1.getX() - point2.getX())*
				(point1.getX() - point2.getX()) +
				(point1.getY() - point2.getY())*(point1.getY() - point2.getY())));
		return dist ;
	} 
	public void resetShapeSelected(){
		setShapeSelected(false);
	}
	public abstract double calculateArea();
	
	public abstract void showMe(Graphics g);
	public void savePositionWhereUserPressedMouse(int x, int y){
		setLastMousePosition(new Coordinates(x, y));
	}
	public abstract String toString();
	// Getters and setters.
	public Coordinates getReferencePoint() {
		return referencePoint;
	}

	public void setReferencePoint(Coordinates referencePoint) {
		this.referencePoint = referencePoint;
	}

	public boolean isShapeSelected() {
		return shapeSelected;
	}
	public void setShapeSelected(boolean shapeSelected) {
		this.shapeSelected = shapeSelected;
	}

	public Coordinates getLastMousePosition() {
		return lastMousePosition;
	}

	public void setLastMousePosition(Coordinates lastMousePosition) {
		this.lastMousePosition = lastMousePosition;
	}

	public Color getColor() {
		return colorCircle;
	}

	public void setColor(Color colorCircle) {
		this.colorCircle = colorCircle;
	}
}
